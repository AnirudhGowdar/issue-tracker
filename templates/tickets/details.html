{% extends 'base.html' %}
{% block content %}
{% load static %}
<body class="about">
    <div>
        <div class="div-left">
            <h1 class="details-header">Ticket details</h1>
            <hr/>
            <dl class="row">
                <dt class="col-sm-6 large-font-1">Title</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.title}}</dd>
                <dt class="col-sm-6 large-font-1">Description</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.description}}</dd>
                <dt class="col-sm-6 large-font-1">Type</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.ticket_type.name}}</dd>
                <dt class="col-sm-6 large-font-1">Priority</dt>
                {% if ticket.ticket_priority.name %}
                <dd class="col-sm-6 large-font-1">{{ticket.ticket_priority.name}}</dd>
                {% else %}
                <dd class="col-sm-6 large-font-1">Not Assigned</dd>
                {% endif %}
                <dt class="col-sm-6 large-font-1">Date Created</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.created}}</dd>
                <dt class="col-sm-6 large-font-1">Last Modified</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.updated}}</dd>
                <dt class="col-sm-6 large-font-1">Project</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.project.title}}</dd>
                <dt class="col-sm-6 large-font-1">Opened by</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.owner.username}}</dd>
                <dt class="col-sm-6 large-font-1">Status</dt>
                <dd class="col-sm-6 large-font-1">{{ticket.ticket_status.name}}</dd>
            </dl>
            {% if ticket.project.manager == user %}
            <a href="{% url 'tickets:assign' ticket.pk %}">Assign a developer</a>
            {% endif %}
        </div>
        <div class="card-body">
            <form action="{% url 'tickets:details' ticket.pk%}" method="POST" novalidate>
                {% csrf_token %}
                {% for field in form %}
                <div class="form-group">
                    <label for="{{ field.name }}">{{ field.label }}</label>
                    {{field}}
                    <div class="text-danger">{{field.errors|striptags}}</div>
                </div>
                {% endfor %}
                <input type="submit" value="Add comment" class="btn btn-secondary btn-block col-7">
            </form>
        </div>
        {% for comment in comments %}
        <div style="padding-left: 2%;padding-bottom: 1%;">
        <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header" style="background-color:khaki; color: rgb(63, 56, 56);">
              <strong class="mr-auto"><b>{{comment.author}}</b></strong>
              <small>{{comment.created}}</small>
            </div>
            <div class="toast-body" style="background-color:beige;">
              {{comment}}
            </div>
        </div>
        </div>
        {% endfor %}
    </div>
</body>
{% endblock %}
